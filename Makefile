.PHONY: help analyse lint fix quality test phpstan psalm phpcs phpcbf

help: ## –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-20s\033[0m %s\n", $$1, $$2}'

analyse: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
	@echo "üîç –ó–∞–ø—É—Å–∫–∞—é –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞..."
	composer analyse

lint: ## –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –Ω–∞ –æ—à–∏–±–∫–∏ (PHPStan + Psalm)
	@echo "üîç –ü—Ä–æ–≤–µ—Ä—è—é –∫–æ–¥ –Ω–∞ –æ—à–∏–±–∫–∏..."
	composer lint

fix: ## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞
	@echo "üîß –ò—Å–ø—Ä–∞–≤–ª—è—é —Å—Ç–∏–ª—å –∫–æ–¥–∞..."
	composer fix

quality: ## –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (lint + tests)
	@echo "üèÜ –ü—Ä–æ–≤–µ—Ä—è—é –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞..."
	composer quality

test: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
	@echo "üß™ –ó–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç—ã..."
	composer test

phpstan: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å PHPStan
	@echo "üîç –ó–∞–ø—É—Å–∫–∞—é PHPStan..."
	composer phpstan

psalm: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å Psalm
	@echo "üîç –ó–∞–ø—É—Å–∫–∞—é Psalm..."
	composer psalm

phpcs: ## –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞
	@echo "üîç –ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç–∏–ª—å –∫–æ–¥–∞..."
	composer phpcs

phpcbf: ## –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞
	@echo "üîß –ò—Å–ø—Ä–∞–≤–ª—è—é —Å—Ç–∏–ª—å –∫–æ–¥–∞..."
	composer phpcbf

quick-check: ## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (PHPStan + —Ç–µ—Å—Ç—ã)
	@echo "‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞..."
	composer phpstan
	composer test
