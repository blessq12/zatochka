–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏

User ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	email (unique)
	‚Ä¢	password
	‚Ä¢	2FA (fields Fortify)
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps
	‚Ä¢	roles (—á–µ—Ä–µ–∑ Spatie)

‚∏ª

–ö–ª–∏–µ–Ω—Ç—ã

Client ‚úÖ
	‚Ä¢	id
	‚Ä¢	full_name
	‚Ä¢	phone (unique)
	‚Ä¢	telegram (nullable)
	‚Ä¢	birth_date
	‚Ä¢	delivery_address
	‚Ä¢	password (nullable, –µ—Å–ª–∏ –µ—Å—Ç—å –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç)
	‚Ä¢	remember_token
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

BonusTransaction ‚úÖ
	‚Ä¢	id
	‚Ä¢	client_id (FK ‚Üí Client)
	‚Ä¢	order_id (nullable, FK ‚Üí Order)
	‚Ä¢	type (earn/spend)
	‚Ä¢	amount
	‚Ä¢	description
	‚Ä¢	timestamps

BonusSettings ‚úÖ
	‚Ä¢	id
	‚Ä¢	earn_percent (–ø–æ –∑–∞–∫–∞–∑—É)
	‚Ä¢	expire_days
	‚Ä¢	min_order_amount
	‚Ä¢	max_bonus_per_order
	‚Ä¢	updated_at

Notification ‚úÖ
	‚Ä¢	id
	‚Ä¢	client_id (FK ‚Üí Client)
	‚Ä¢	channel (telegram/sms/email)
	‚Ä¢	content
	‚Ä¢	status (sent/failed/pending)
	‚Ä¢	sent_at
	‚Ä¢	timestamps

‚∏ª

–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

Company ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	legal_name, —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
	‚Ä¢	additional_data (json)
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

Branch ‚úÖ
	‚Ä¢	id
	‚Ä¢	company_id (FK ‚Üí Company)
	‚Ä¢	name
	‚Ä¢	code (unique)
	‚Ä¢	address, phone, email
	‚Ä¢	latitude, longitude
	‚Ä¢	is_active
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

Order ‚úÖ
	‚Ä¢	id
	‚Ä¢	client_id (FK ‚Üí Client)
	‚Ä¢	branch_id (FK ‚Üí Branch)
	‚Ä¢	manager_id (FK ‚Üí User)
	‚Ä¢	master_id (nullable, FK ‚Üí User)
	‚Ä¢	order_number (unique –≥–ª–æ–±–∞–ª—å–Ω–æ)
	‚Ä¢	service_type_id (FK ‚Üí ServiceType)
	‚Ä¢	status_id (FK ‚Üí OrderStatus)
	‚Ä¢	urgency (normal/urgent)
	‚Ä¢	is_paid (bool)
	‚Ä¢	paid_at
	‚Ä¢	discount_id (nullable, FK ‚Üí DiscountRule)
	‚Ä¢	total_amount
	‚Ä¢	final_price
	‚Ä¢	cost_price
	‚Ä¢	profit
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

OrderLog ‚úÖ
	‚Ä¢	id
	‚Ä¢	order_id (FK ‚Üí Order)
	‚Ä¢	user_id (FK ‚Üí User)
	‚Ä¢	action (status_changed, payment, note, etc.)
	‚Ä¢	data (json)
	‚Ä¢	created_at

OrderMedia (Spatie MediaLibrary)
	‚Ä¢	—á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—É—é —Å–≤—è–∑—å ‚Üí Order

‚∏ª

–†–∞–±–æ—Ç—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

Repair ‚úÖ
	‚Ä¢	id
	‚Ä¢	order_id (FK ‚Üí Order)
	‚Ä¢	description
	‚Ä¢	used_materials (json –∏–ª–∏ —Å–≤—è–∑—å —á–µ—Ä–µ–∑ InventoryItem)
	‚Ä¢	work_time_minutes
	‚Ä¢	price
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

‚∏ª

–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è (—Å–∫–ª–∞–¥)

InventoryItem ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	sku (unique)
	‚Ä¢	quantity
	‚Ä¢	unit (pcs, ml, etc.)
	‚Ä¢	min_stock
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

InventoryTransaction ‚úÖ
	‚Ä¢	id
	‚Ä¢	item_id (FK ‚Üí InventoryItem)
	‚Ä¢	type (in/out/adjustment)
	‚Ä¢	quantity
	‚Ä¢	order_id (nullable, FK ‚Üí Order)
	‚Ä¢	description
	‚Ä¢	timestamps

‚∏ª

–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

ServiceType ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	description
	‚Ä¢	is_deleted (bool)

ToolType ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	is_deleted (bool)

EquipmentType ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	is_deleted (bool)

PaymentType ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	is_deleted (bool)

DeliveryType ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	is_deleted (bool)

OrderStatus ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	type (manager/master/system)
	‚Ä¢	is_final (bool)
	‚Ä¢	sort_order
	‚Ä¢	is_deleted (bool)

OrderStatusTransition ‚úÖ
	‚Ä¢	id
	‚Ä¢	from_status_id (FK ‚Üí OrderStatus)
	‚Ä¢	to_status_id (FK ‚Üí OrderStatus)
	‚Ä¢	role (manager/master/system)
	‚Ä¢	timestamps

‚∏ª

–û—Ç–∑—ã–≤—ã

Review ‚úÖ
	‚Ä¢	id
	‚Ä¢	client_id (FK ‚Üí Client)
	‚Ä¢	order_id (FK ‚Üí Order)
	‚Ä¢	rating
	‚Ä¢	comment
	‚Ä¢	is_approved
	‚Ä¢	reply (nullable)
	‚Ä¢	metadata (json)
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

‚∏ª

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

TelegramChat ‚úÖ
	‚Ä¢	id
	‚Ä¢	client_id (nullable, FK ‚Üí Client)
	‚Ä¢	username
	‚Ä¢	chat_id (unique)
	‚Ä¢	is_active
	‚Ä¢	metadata (json)
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

TelegramMessage ‚úÖ
	‚Ä¢	id
	‚Ä¢	chat_id (FK ‚Üí TelegramChat)
	‚Ä¢	client_id (nullable, FK ‚Üí Client)
	‚Ä¢	content
	‚Ä¢	direction (in/out)
	‚Ä¢	sent_at
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

‚∏ª

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

DiscountRule ‚úÖ
	‚Ä¢	id
	‚Ä¢	name
	‚Ä¢	type (percent/fixed)
	‚Ä¢	value
	‚Ä¢	conditions (json)
	‚Ä¢	active_from
	‚Ä¢	active_to
	‚Ä¢	is_active
	‚Ä¢	is_deleted (bool)
	‚Ä¢	timestamps

‚∏ª

–í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø:

1. –ö–ê–°–ö–ê–î–ù–´–ï –£–î–ê–õ–ï–ù–ò–Ø: –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç is_deleted (bool) –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
2. –£–ù–ò–ö–ê–õ–¨–ù–û–°–¢–¨: order_number —É–Ω–∏–∫–∞–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ –ø–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ
3. –¶–ò–ö–õ–ò–ß–ï–°–ö–ò–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò: –†–µ—à–µ–Ω—ã —á–µ—Ä–µ–∑ is_deleted - User, Order, Client –º–æ–≥—É—Ç –±—ã—Ç—å "—É–¥–∞–ª–µ–Ω—ã" –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–≤—è–∑–µ–π
4. –ê–£–î–ò–¢: OrderLog —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç—Ä–µ–∫–∏–Ω–≥–∞
5. –ì–ò–ë–ö–û–°–¢–¨: JSON –ø–æ–ª—è (additional_data, metadata, conditions) –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

‚∏ª

–°–¢–ê–¢–£–° –°–û–ó–î–ê–ù–ò–Ø –ú–û–î–ï–õ–ï–ô –ò –ú–ò–ì–†–ê–¶–ò–ô:

‚úÖ User - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Client - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Company - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Branch - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ ServiceType - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ ToolType - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ EquipmentType - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ PaymentType - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ DeliveryType - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ OrderStatus - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ OrderStatusTransition - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ DiscountRule - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Order - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ OrderLog - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Repair - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ InventoryItem - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ InventoryTransaction - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ BonusTransaction - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ BonusSettings - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Notification - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Review - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ TelegramChat - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ TelegramMessage - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ Tool - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã
‚úÖ OrderTools - –º–æ–¥–µ–ª—å –∏ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω—ã

üéØ –í–°–ï –ú–û–î–ï–õ–ò –ò –ú–ò–ì–†–ê–¶–ò–ò –°–û–ó–î–ê–ù–´!

‚∏ª

INTEGRATION STATUS:

‚úÖ Spatie MediaLibrary –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤:
- Order (before_photos, after_photos, documents)
- Tool (photos, manuals, warranty_documents)
- Repair (before_photos, after_photos, work_photos, documents)

‚úÖ –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏:
- Order ‚Üî Tool (many-to-many —á–µ—Ä–µ–∑ order_tools)
- Order ‚Üí Repair (one-to-many)
- Tool ‚Üí ToolType, EquipmentType (belongsTo)

üéØ MediaLibrary –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω!
