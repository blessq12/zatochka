---
description: Filament и UI архитектура - панели, ресурсы, провайдеры
globs:
alwaysApply: true
---

# Filament и UI архитектура

## Filament панели

### Основные панели

-   **Manager Panel** (`/manager`) - панель менеджера
-   **Master Panel** (`/master`) - панель мастера
-   Роли: `manager`, `master`

### Провайдеры панелей

-   `ManagerPanelProvider` - панель менеджера
-   `MasterPanelProvider` - панель мастера
-   `MiddlewareServiceProvider` - middleware для панелей

## Filament ресурсы

### Заказы

-   `OrderResource` - управление заказами с Activity Log
-   `ActivityLogsRelationManager` - история изменений заказов

### Бонусная система

-   `BonusSettingsResource` - настройки бонусной системы (только редактирование)
-   `BonusTransactionResource` - просмотр движений бонусов (только просмотр)

### Дополнительные ресурсы

-   `ClientResource` - управление клиентами
-   `CompanyResource` - управление компаниями
-   `BranchResource` - управление филиалами
-   `StockItemResource` - управление товарами
-   `WarehouseResource` - управление складами
-   `UserResource` - управление пользователями

## UI компоненты

### Frontend технологии

-   **Vue 3.2** - реактивный фреймворк
-   **Tailwind CSS 4.1** - CSS фреймворк
-   **Bootstrap 5.2** - UI компоненты
-   **GSAP 3.13** - анимации
-   **Maska 3.2** - маски ввода
-   **Vite 7.0** - сборщик

### Структура ресурсов

-   Формы для создания и редактирования
-   Таблицы для отображения списков
-   Фильтры и поиск
-   Действия (actions) для массовых операций
-   Relation Managers для связанных данных

## Activity Log интеграция

### Spatie Activity Log

-   Автоматическое логирование изменений в заказах
-   `ActivityLogsRelationManager` для отображения истории
-   `FieldValueFormatterService` для красивого отображения изменений
-   Логирование действий пользователей

### Настройка логирования

-   Конфигурация в `config/activitylog.php`
-   Модели с трейтом `LogsActivity`
-   Кастомные события для бизнес-логики

## Безопасность и права доступа

### Роли и права

-   Роли через Spatie Permission
-   `manager` - полный доступ к управлению
-   `master` - ограниченный доступ к заказам
-   Middleware для защиты роутов

### CSRF защита

-   Автоматическая CSRF защита в Filament
-   Rate limiting для API
-   Валидация прав доступа на уровне ресурсов

## Производительность

### Оптимизация запросов

-   Eager loading связей
-   Индексы в миграциях
-   Кэширование через Redis
-   Пагинация в таблицах

### Кэширование

-   Кэширование конфигураций
-   Кэширование прав доступа
-   Кэширование справочников

## Кастомизация

### Темы и стили

-   Кастомные CSS стили
-   Переопределение компонентов Filament
-   Адаптивный дизайн

### Локализация

-   Русская локализация
-   Кастомные переводы
-   Форматирование дат и чисел
