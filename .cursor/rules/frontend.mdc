---
name: frontend
glob:
alwaysApply: true
---

# Frontend Rules

## Architecture

### Hybrid: Blade + Vue.js

-   **Blade** - статические страницы и серверный рендеринг
-   **Vue.js** - интерактивные компоненты и SPA-функциональность
-   **Hybrid подход** - комбинирование серверного и клиентского рендеринга

### Blade Views

-   `resources/views/components` — переиспользуемые компоненты (layouts, navigation, footer)
-   `resources/views/pages` — страницы приложения
-   `resources/views/auth` — шаблоны аутентификации
-   `resources/views/livewire` — Livewire компоненты

### Vue.js Structure

-   `resources/js/components` — Vue компоненты, подкаталоги по доменам
-   `resources/js/stores` — Pinia stores (одно хранилище на домен)
-   `resources/js/dto` — Data Transfer Objects (request/response)
-   `resources/js/services` — сервисы и утилиты

## Stack

### Build Tools

-   **Vite 7.0.4** - современный билдер и dev сервер
-   **Laravel Vite Plugin 2.0.0** - интеграция с Laravel backend
-   **@vitejs/plugin-vue 4.5.0** - Vue.js плагин для Vite

### Frontend Framework

-   **Vue 3.2.37** - реактивный JavaScript фреймворк
-   **Pinia 3.0.3** - состояние приложения (state management)

### Styling

-   **Tailwind CSS 4.1.12** - utility-first CSS фреймворк
-   **@tailwindcss/vite 4.1.12** - Tailwind CSS плагин для Vite
-   **Sass 1.56.1** - CSS препроцессор

### HTTP & Forms

-   **Axios 1.11.0** - HTTP клиент для API запросов
-   **Yup 1.7.0** - схема валидации для форм
-   **Maska 3.2.0** - маски ввода для форм

### Animation & UX

-   **GSAP 3.13.0** - профессиональная библиотека анимаций
-   **@popperjs/core 2.11.6** - позиционирование элементов

## Rules

### Blade Components

-   **Именование**: kebab-case для файлов
-   **Использование**: `<x-component.name />`
-   **Props**: через атрибуты компонента
-   **Slots**: `{{ $slot }}` для контента
-   **Layouts**: единый макет для всех страниц
-   **Vite интеграция**: `@vite(['resources/css/app.css', 'resources/js/app.js'])`

### Vue Components

-   **Именование**: PascalCase файлы (`LoginForm.vue`)
-   **Структура**: импорты → экспорт с `name` → `data`, `computed`, `methods` → шаблон → scoped стили
-   **Props**: camelCase
-   **Events**: kebab-case
-   **Scoped стили**: всегда использовать `scoped`

### Pinia Stores

-   **Именование**: `use{Domain}Store`
-   **API вызовы**: только в stores, не в компонентах
-   **DTO**: обязательное формирование payload через DTO
-   **Возвраты**: из actions возвращать `{ success, data | error }`
-   **Состояния**: централизованные `isLoading` и `error`

### State Management

**Использовать Pinia для:**

-   Глобального состояния (auth, settings)
-   API данных (orders, users)
-   Сложной логики (cart, filters)

**НЕ использовать Pinia для:**

-   Локального состояния форм
-   UI состояний (modal open/close)
-   Временных данных

### Services

-   **Именование**: camelCase с суффиксом Service
-   **Инкапсуляция**: логика, не связанная с компонентами
-   **Dependency Injection**: через provide/inject
-   **Чистые функции**: без побочных эффектов

## Integration Patterns

### Blade + Vue Integration

-   **Vue компоненты**: только для интерактивности
-   **Blade**: для статического контента и SEO
-   **Монтирование**: на элемент с id="app"
-   **Авторегистрация**: через import.meta.glob

### Routing Strategy

-   **Все страницы**: через Laravel routes (Blade)
-   **SEO оптимизация**: серверный рендеринг
-   **Мета-теги**: через Blade макеты

## Development Rules

### Creating Components

1. **Vue компонент**: файл в `resources/js/components/` (PascalCase)
2. **Store**: файл в `resources/js/stores/` (`use{Domain}Store`)
3. **DTO**: файл в `resources/js/dto/domain/` (`{action}RequestDto`)

### Form Handling

-   **Разделение**: `form` (данные) + `schema` (валидация)
-   **Yup**: валидация с русскими сообщениями
-   **API вызовы**: только через stores
-   **Ошибки**: под полями + общий блок

### API & Data

-   **Axios**: конфигурация в bootstrap.js, CSRF автоматически
-   **URL**: относительные пути `/api/`
-   **Ошибки**: обработка в stores, понятные сообщения в компонентах
-   **Кэширование**: через stores

## Anti-Patterns (НЕ ДЕЛАТЬ)

❌ **API вызовы в компонентах** — только в stores
❌ **Смешивание form и schema** — разделять данные и валидацию
❌ **Inline стили** — использовать Tailwind классы
❌ **Прямые DOM манипуляции** в Vue
❌ **Дублирование состояния** между Blade и Vue
❌ **jQuery с Vue** — несовместимо
❌ **Монолитные компоненты** — декомпозиция обязательна
❌ **Отсутствие loading/error** состояний
❌ **Хардкод строк** — локализация
❌ **Игнорирование accessibility** (focus, aria)
